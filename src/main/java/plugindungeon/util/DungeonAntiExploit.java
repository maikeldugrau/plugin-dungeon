package plugindungeon.util;

import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.block.BlockBreakEvent;
import org.bukkit.event.block.BlockPlaceEvent;

import java.util.HashSet;
import java.util.Set;
import java.util.UUID;

public class DungeonAntiExploit implements Listener {

    private static final Set<UUID> protectedPlayers = new HashSet<>();

    public static void protectPlayer(org.bukkit.entity.Player p) { protectedPlayers.add(p.getUniqueId()); }
    public static void unprotectPlayer(org.bukkit.entity.Player p) { protectedPlayers.remove(p.getUniqueId()); }
    private boolean isInDungeon(org.bukkit.entity.Player p) { return protectedPlayers.contains(p.getUniqueId()); }

    @EventHandler
    public void onBreak(BlockBreakEvent e) { if (isInDungeon(e.getPlayer())) e.setCancelled(true); }

    @EventHandler
    public void onPlace(BlockPlaceEvent e) { if (isInDungeon(e.getPlayer())) e.setCancelled(true); }
}
